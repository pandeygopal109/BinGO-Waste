<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bingo Waste | Smart Management Dashboard (Final)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom Styles for Bingo Branding */
        .bingo-green { background-color: #00A65A; }
        .bingo-green-text { color: #00A65A; }
        .bingo-blue { background-color: #1D3557; }
        .bingo-blue-text { color: #1D3557; }
        /* Style for the Compliance Gauge Ring (98% filled) */
        .compliance-gauge {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: conic-gradient(#00A65A 98%, #e0e0e0 2%); 
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .gauge-inner {
            width: 130px;
            height: 130px;
            border-radius: 50%;
            background-color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
    </style>
</head>
<body class="bg-gray-50 flex min-h-screen">

    <aside class="w-64 bg-white shadow-xl fixed h-full flex flex-col">
        <div class="p-6 border-b">
            <h1 class="text-2xl font-bold bingo-green-text">‚ôªÔ∏è Bingo Waste</h1>
        </div>
        <nav class="flex-grow p-4 space-y-2" id="sidebar-nav">
            <a href="#" class="nav-link flex items-center p-3 rounded-lg bingo-green text-white font-semibold shadow-md transition duration-200" data-page="dashboard">
                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-10v10a1 1 0 001 1h3M14 7h-4"></path></svg>
                Dashboard
            </a>
            <a href="#" class="nav-link flex items-center p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition duration-200" data-page="smart-bins">
                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10M10 7v10M16 7v10M20 5v14a2 2 0 01-2 2H6a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2z"></path></svg>
                Smart Bins
            </a>
            <a href="#" class="nav-link flex items-center p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition duration-200" data-page="schedule">
                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                Schedule Pickup
            </a>
            <a href="#" class="nav-link flex items-center p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition duration-200" data-page="reports">
                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5l2 2h3a2 2 0 012 2v10a2 2 0 01-2 2z"></path></svg>
                Compliance Reports
            </a>
            <a href="#" class="nav-link flex items-center p-3 rounded-lg text-gray-700 hover:bg-gray-100 transition duration-200" data-page="rewards">
                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1h-2a1 1 0 01-1-1v-5z"></path></svg>
                Rewards Hub
            </a>
        </nav>
        
        <div class="p-4 border-t relative" id="profile-dropdown-trigger">
            <div class="flex items-center space-x-3 cursor-pointer">
                <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center text-lg font-semibold bingo-blue-text">M</div>
                <div>
                    <p class="font-semibold text-gray-800">MediCare Clinic</p>
                    <p class="text-sm text-gray-500">Admin</p>
                </div>
            </div>

            <div id="profile-menu" class="absolute bottom-full left-0 mb-2 w-full bg-white border border-gray-200 rounded-lg shadow-xl py-1 hidden z-10">
                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" id="settings-button">
                    Settings & Payments
                </a>
                <a href="#" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50" id="logout-button">
                    Logout
                </a>
            </div>
        </div>
    </aside>

    <main class="flex-grow p-8 ml-64" id="app-content">
        
        <div id="dashboard-view" class="hidden">
            <header class="mb-8 flex justify-between items-center">
                <h2 class="text-3xl font-bold text-gray-800">üëã Welcome back, Admin!</h2>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <input type="text" placeholder="Search Bins, Reports, or Help..." class="p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-bingo-green">
                        <svg class="w-5 h-5 text-gray-400 absolute right-3 top-1/2 transform -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    </div>
                </div>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white p-5 rounded-xl shadow-lg border-l-4 border-gray-400">
                    <p class="text-sm font-medium text-gray-500">Total Smart Bins</p>
                    <p class="text-3xl font-bold text-gray-900 mt-1">6</p>
                </div>
                <div class="bg-white p-5 rounded-xl shadow-lg border-l-4 border-bingo-green">
                    <p class="text-sm font-medium text-gray-500">Next Scheduled Pickup</p>
                    <p class="text-xl font-bold text-gray-900 mt-1" id="next-pickup-time">Dec 12, 10:00 AM</p>
                    <p class="text-xs text-bingo-green-text" id="next-pickup-status">Manifest #BW2345 Confirmed</p>
                </div>
                <div class="bg-white p-5 rounded-xl shadow-lg border-l-4 border-yellow-500">
                    <p class="text-sm font-medium text-gray-500">Eco-Credits Earned (This Month)</p>
                    <p class="text-3xl font-bold text-gray-900 mt-1" id="current-credits">‚Çπ450</p>
                </div>
                <div class="bg-white p-5 rounded-xl shadow-lg border-l-4 border-bingo-blue">
                    <p class="text-sm font-medium text-gray-500">Subscription Status</p>
                    <p class="text-xl font-bold text-gray-900 mt-1">‚Çπ1200/Month</p>
                    <p class="text-xs text-bingo-blue-text">Auto-Pay Active</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                
                <div class="lg:col-span-1 bg-white p-6 rounded-xl shadow-lg flex flex-col items-center">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Compliance Status</h3>
                    <div class="compliance-gauge">
                        <div class="gauge-inner">
                            <p class="text-4xl font-extrabold bingo-green-text" id="compliance-score">98%</p>
                            <p class="text-sm text-gray-500">Compliant</p>
                        </div>
                    </div>
                    <p class="text-base text-gray-600 mt-3 mb-4" id="compliance-message">Excellent! All reports filed on time.</p>
                    <div class="w-full p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg mt-4" id="urgent-alert-card">
                        <div class="flex items-start">
                            <svg class="w-6 h-6 text-yellow-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                            <div>
                                <p class="font-bold text-gray-800">URGENT: Bin 90% Full</p>
                                <p class="text-sm text-gray-600" id="urgent-bin-details">Yellow (Infectious) in OT-1 is near capacity.</p>
                            </div>
                        </div>
                        <button class="w-full mt-3 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition duration-200 shadow-md schedule-now-button" data-bin-id="Y-OT1">Schedule Pickup Now</button>
                    </div>
                </div>

                <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-semibold text-gray-800">Smart Bins Tracker (IoT Data)</h3>
                        <a href="#" class="text-sm bingo-green-text font-semibold hover:underline nav-link" data-page="smart-bins">View Full Inventory ‚Üí</a>
                    </div>
                    
                    <div class="space-y-4" id="bins-list-container">
                        <div class="flex items-center p-4 border border-red-300 rounded-lg shadow-sm bg-red-50" data-bin-card="Y-OT1">
                            <div class="w-16 h-16 bg-yellow-500 rounded-lg mr-4 flex items-center justify-center text-white font-bold text-xl">Y</div>
                            <div class="flex-grow">
                                <p class="font-bold text-gray-800">Yellow Bin (Infectious)</p>
                                <p class="text-sm text-gray-600">Location: OT Room 1</p>
                            </div>
                            <div class="w-40 mr-4">
                                <div class="flex justify-between text-xs font-semibold mb-1">
                                    <span>Fill Level: 90%</span>
                                    <span class="text-red-600">URGENT!</span>
                                </div>
                                <div class="h-2 bg-gray-200 rounded-full">
                                    <div class="h-full bg-red-600 rounded-full" style="width: 90%;"></div>
                                </div>
                            </div>
                            <button class="text-sm font-semibold bingo-blue-text hover:underline force-pickup-button" data-bin-id="Y-OT1">Force Pickup</button>
                        </div>

                        <div class="flex items-center p-4 border border-gray-200 rounded-lg shadow-sm" data-bin-card="B-LA2">
                            <div class="w-16 h-16 bg-blue-500 rounded-lg mr-4 flex items-center justify-center text-white font-bold text-xl">B</div>
                            <div class="flex-grow">
                                <p class="font-bold text-gray-800">Blue Bin (Glassware)</p>
                                <p class="text-sm text-gray-600">Location: Lab Section A</p>
                            </div>
                            <div class="w-40 mr-4">
                                <div class="flex justify-between text-xs font-semibold mb-1">
                                    <span>Fill Level: 20%</span>
                                    <span class="text-bingo-green-text">Normal</span>
                                </div>
                                <div class="h-2 bg-gray-200 rounded-full">
                                    <div class="h-full bingo-green rounded-full" style="width: 20%;"></div>
                                </div>
                            </div>
                            <button class="text-sm font-semibold bingo-blue-text hover:underline view-details-button" data-bin-id="B-LA2">View Details</button>
                        </div>

                        <div class="flex items-center p-4 border border-yellow-300 rounded-lg shadow-sm bg-yellow-50" data-bin-card="W-MPR">
                            <div class="w-16 h-16 bg-white rounded-lg mr-4 border-2 border-gray-400 flex items-center justify-center text-gray-800 font-bold text-xl">W</div>
                            <div class="flex-grow">
                                <p class="font-bold text-gray-800">White Bin (Sharps)</p>
                                <p class="text-sm text-gray-600">Location: Minor Procedure Room</p>
                            </div>
                            <div class="w-40 mr-4">
                                <div class="flex justify-between text-xs font-semibold mb-1">
                                    <span>Fill Level: 85%</span>
                                    <span class="text-yellow-600">Near Full</span>
                                </div>
                                <div class="h-2 bg-gray-200 rounded-full">
                                    <div class="h-full bg-yellow-600 rounded-full" style="width: 85%;"></div>
                                </div>
                            </div>
                            <button class="text-sm font-semibold bingo-blue-text hover:underline force-pickup-button" data-bin-id="W-MPR">Force Pickup</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-semibold text-gray-800">Recycling Rewards & Impact</h3>
                        <a href="#" class="text-sm bingo-green-text font-semibold hover:underline redeem-credits-link">Redeem Credits ‚Üí</a>
                    </div>
                    <div class="flex space-x-6 items-center">
                        <div>
                            <p class="text-5xl font-extrabold text-bingo-blue" id="total-credits">‚Çπ1,850</p>
                            <p class="text-sm text-gray-500 mt-1">Total Life-to-Date Credits</p>
                        </div>
                        <div class="flex-grow h-40">
                            <canvas id="impactChart"></canvas>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-gray-50 rounded-lg border-l-4 border-bingo-green">
                        <p class="text-sm font-medium text-gray-700">üéâ **Great Job!** You have diverted **450 kg** of recyclable waste this year.</p>
                    </div>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Recent Activity Feed</h3>
                    <ul class="space-y-3 text-sm" id="activity-feed">
                        <li class="flex justify-between items-center" data-activity-id="1">
                            <span class="text-gray-700 font-medium">Pickup Completed: Manifest #BW2344</span>
                            <span class="text-gray-500">Dec 10, 2:00 PM</span>
                            <button class="text-xs text-blue-500 font-semibold hover:underline download-manifest-button" data-manifest-id="BW2344">Download PDF</button>
                        </li>
                        <li class="flex justify-between items-center" data-activity-id="2">
                            <span class="text-gray-700 font-medium">Subscription Paid: Dec Cycle</span>
                            <span class="text-gray-500">Dec 1, 12:01 AM</span>
                            <button class="text-xs text-blue-500 font-semibold hover:underline view-receipt-button">View Receipt</button>
                        </li>
                        <li class="flex justify-between items-center" data-activity-id="3">
                            <span class="text-gray-700 font-medium">IoT Alert: Yellow Bin reached 70%</span>
                            <span class="text-gray-500">Nov 28, 9:30 AM</span>
                            <button class="text-xs text-blue-500 font-semibold hover:underline dismiss-alert-button" data-alert-id="A3">Dismiss</button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        </main>

    <script>
        // --- 6.1 Chart.js Initialization ---
        function initializeChart() {
            const ctx = document.getElementById('impactChart');
            if (!ctx) return; 

            if (window.impactChartInstance) {
                window.impactChartInstance.destroy();
            }

            window.impactChartInstance = new Chart(ctx.getContext('2d'), {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Recyclable Waste Diverted (kg)',
                        data: [50, 65, 80, 75, 90, 95],
                        backgroundColor: '#00A65A', 
                        borderRadius: 5,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true, grid: { display: false }, ticks: { display: false } }, x: { grid: { display: false } } },
                    plugins: { legend: { display: false }, tooltip: { mode: 'index', intersect: false } }
                }
            });
        }

        // --- 6.2 Utility Function to Simulate API Calls and Routing ---
        function simulateApiCall(successMessage, isSuccess = true, delay = 1000) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    if (isSuccess) {
                        alert(`‚úÖ Success: ${successMessage}`);
                        resolve({ success: true });
                    } else {
                        alert('üö® Error: Failed to connect to the server. Please check your internet connection.');
                        reject(new Error("API Simulation Failure"));
                    }
                }, delay);
            });
        }
        
        // Core function to load external content and initialize buttons
        async function loadPageContent(pageName) {
            const contentArea = document.getElementById('app-content');
            
            contentArea.innerHTML = `
                <div class="text-center p-20" id="loading-spinner">
                    <svg class="animate-spin h-8 w-8 text-bingo-green-text mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    <p class="mt-4 text-gray-600">Loading ${pageName.replace('-', ' ')}...</p>
                </div>`;

            try {
                // FETCH FIX: Use the simple file name: /reports.html, /smart-bins.html, etc.
                const response = await fetch(`/${pageName}.html`); 
                
                if (!response.ok) {
                    throw new Error(`Content not found. Check that file /${pageName}.html exists and has the correct case.`);
                }
                
                const htmlContent = await response.text();
                contentArea.innerHTML = htmlContent; 
                
                // CRITICAL STEP: RE-INITIALIZE LISTENERS
                initializeListeners();
                
            } catch (error) {
                console.error(error);
                contentArea.innerHTML = `<p class="text-red-600 p-10">üö® Failed to load page content. Error: ${error.message}</p>`;
            }
        }


        // --- 6.3 CORE INTERACTIVE FUNCTIONS ---

        async function handleUrgentPickup(binId) {
            const button = document.querySelector(`.schedule-now-button[data-bin-id="${binId}"]`);
            if (!button) return;
            button.disabled = true;
            button.textContent = 'Scheduling...';
            
            try {
                await simulateApiCall(`Pickup scheduled for Bin ${binId}. Manifest #BW2346 generated.`);
                // Simulate Dashboard UI updates
                const timeElement = document.getElementById('next-pickup-time');
                if (timeElement) timeElement.textContent = 'Today, 4:00 PM';
                const statusElement = document.getElementById('next-pickup-status');
                if (statusElement) statusElement.textContent = 'Manifest #BW2346 Generated';
                const alertCard = document.getElementById('urgent-alert-card');
                if(alertCard) alertCard.classList.add('hidden');
                
            } catch (error) {
                button.textContent = 'Schedule Pickup Now'; 
                console.error("Pickup scheduling failed:", error);
            } finally {
                button.disabled = false;
            }
        }

        async function handleForcePickup(binId, button) {
            const originalText = button.textContent;
            button.disabled = true;
            button.textContent = 'Requesting...';
            
            try {
                await simulateApiCall(`Force pickup requested for Bin ${binId}. Added to collection queue.`);
                button.textContent = 'Requested'; 
            } catch (error) {
                button.textContent = originalText;
                console.error("Force pickup failed:", error);
            } finally {
                button.disabled = false;
            }
        }

        async function handleDownloadManifest(manifestId) {
            try {
                await simulateApiCall(`Manifest ${manifestId} prepared for download.`);
                window.open('https://bingowaste.in/download/manifest-' + manifestId + '.pdf', '_blank');
            } catch (error) {
                console.error("Download failed:", error);
            }
        }
        
        // --- Profile Dropdown Functions ---
        function toggleProfileMenu() {
            const menu = document.getElementById('profile-menu');
            if(menu) menu.classList.toggle('hidden');
        }

        function handleSettingsClick(e) {
            e.preventDefault();
            alert('‚öôÔ∏è Redirecting to Clinic Settings and Billing Management.');
            toggleProfileMenu(); 
        }

        function handleLogoutClick(e) {
            e.preventDefault();
            alert('üëã Logging out. Session ended securely.');
            toggleProfileMenu(); 
        }

        // Function to load the initial Dashboard content 
        function loadDashboard() {
            const dashboardView = document.getElementById('dashboard-view');
            if (dashboardView) {
                // Use innerHTML to grab the template content
                document.getElementById('app-content').innerHTML = dashboardView.innerHTML;
            }
            // Always initialize listeners after content is loaded/replaced
            initializeListeners();
        }


        // --- 6.4 CENTRAL LISTENER INITIALIZATION FUNCTION (The Fix) ---
        function initializeListeners() {
            
            // 1. Setup Profile Dropdown Listeners
            const trigger = document.getElementById('profile-dropdown-trigger');
            if (trigger) {
                // Ensure profile menu button works
                trigger.onclick = toggleProfileMenu; 
                
                // Attach listeners to dropdown items (must use direct IDs since they are fixed in the aside)
                const settingsButton = document.getElementById('settings-button');
                const logoutButton = document.getElementById('logout-button');
                if (settingsButton) settingsButton.onclick = handleSettingsClick;
                if (logoutButton) logoutButton.onclick = handleLogoutClick;
                
                // Global Listener to close menu if user clicks anywhere else
                document.addEventListener('click', function(event) {
                    const menu = document.getElementById('profile-menu');
                    if (menu && !trigger.contains(event.target)) {
                        menu.classList.add('hidden');
                    }
                });
            }

            // 2. Main Content Area Delegation (Handles ALL dynamic buttons on the current page)
            const appContent = document.getElementById('app-content');
            if (appContent) {
                appContent.onclick = function(e) {
                    const target = e.target;
                    e.preventDefault(); // Prevent default link behavior for all functional buttons

                    // Schedule Pickup Button (Dashboard)
                    if (target.classList.contains('schedule-now-button')) {
                        handleUrgentPickup(target.getAttribute('data-bin-id'));
                    } 
                    // Force Pickup Button (Dashboard/Smart Bins)
                    else if (target.classList.contains('force-pickup-button')) {
                        handleForcePickup(target.getAttribute('data-bin-id'), target);
                    }
                    // View Details Button (Dashboard/Smart Bins)
                    else if (target.classList.contains('view-details-button')) {
                        alert(`üîç Showing detailed history for Bin ${target.getAttribute('data-bin-id')}.`);
                    }
                    // Download Manifest/PDF Button
                    else if (target.classList.contains('download-manifest-button')) {
                        handleDownloadManifest(target.getAttribute('data-manifest-id'));
                    }
                    // Dismiss Alert Button
                    else if (target.classList.contains('dismiss-alert-button')) {
                        const listItem = target.closest('li');
                        // No need for a separate handleDismissAlert function, just remove it and simulate success
                        if (listItem) listItem.remove();
                        simulateApiCall('Alert dismissed.', true, 100); 
                    }
                    // General/Placeholder Buttons
                    else if (target.classList.contains('register-bin-button')) {
                        alert('üìù Opening form to register a new IoT bin.');
                    }
                    else if (target.textContent.includes('View Receipt')) {
                        alert('üßæ Viewing subscription receipt for Dec cycle.');
                    }
                    else if (target.textContent.includes('Generate Annual Report')) {
                         alert('üìÖ Generating comprehensive annual compliance report...');
                    }
                };
            }

            // 3. Initialize Chart (only runs if the chart canvas is present)
            initializeChart();
        }


        // --- 6.5 NAVIGATION SETUP (Handles the fixed sidebar) ---
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const page = this.getAttribute('data-page');

                // 1. Update active state in sidebar
                document.querySelectorAll('.nav-link').forEach(nav => {
                    nav.classList.remove('bingo-green', 'text-white');
                    nav.classList.add('text-gray-700', 'hover:bg-gray-100');
                });
                this.classList.add('bingo-green', 'text-white');
                this.classList.remove('text-gray-700', 'hover:bg-gray-100');


                // 2. Load Content
                if (page === 'dashboard') {
                    loadDashboard();
                } else {
                    loadPageContent(page); 
                }
            });
        });

        // --- 6.6 Initial Load ---
        document.addEventListener('DOMContentLoaded', loadDashboard); 

    </script>

</body>
</html>